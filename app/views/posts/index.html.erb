<% provide(:page_title, "All Posts") %>
  <% provide(:post_active, "active") %>
    <p id="notice">
      <%= notice %>
    </p>

    <h1>Posts</h1>
    <% if can? :destroy, @posts %>
      <table class="table table-hover px-4">
        <thead>
          <tr>
            <th>Title</th>
            <th class="text-center">Preview</th>
            <th colspan="3"></th>
          </tr>
        </thead>

        <tbody>
          <% @posts.each do |post| %>
            <tr>
              <td>
                <h5>
                  <%= post.title %>
                </h5>
              </td>
              <td>
                <h6>
                  <%= truncate(post.body, length: 300) %>
                </h6>
              </td>

              <td>
                <%= link_to 'Show', post, class: "btn btn-primary" %>
              </td>
              <td>
                <%= link_to 'Edit', edit_post_path(post), class: "btn btn-info" %>
              </td>
              <td>
                <%= link_to 'Destroy', post, method: :delete, data: { confirm: 'Are you sure?' }, class: "btn btn-danger" %>
              </td>
            </tr>
            <% end %>
        </tbody>
      </table>

      <br>

      <%= link_to 'New Post', new_post_path, class: "btn btn-success" %>



        <% else %>
          <div class="card-group">

            <% @posts.each do |post| %>
              <div class='col-sm-6 col-lg-4'>
                <div class="card bg-light mb-4">
                  <div class="card-img-top mx-auto d-block" style='background-image: url(<%= post.banner_image_url %>);'></div>
                  <div class="card-body">
                    <h4 class="card-title">
                      <%= link_to post.title, post %>
                    </h4>
                    <h6 class="card-text">
                      <%= truncate(post.body, length: 150) %>
                        <%= link_to "Read More...", post %>
                    </h6>

                  </div>
                  <div class="card-footer">
                    <small class="text-muted">
                      <%= post.display_day_published %>
                    </small>
                  </div>
                </div>
              </div>
              <% end %>
          </div>
          <% end %>